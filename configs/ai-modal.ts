import { GoogleGenerativeAI } from "@google/generative-ai"

const apiKey = process.env.EXPO_PUBLIC_GEMINI_API_KEY!
const genAI = new GoogleGenerativeAI(apiKey)

const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" })

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
}

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: New York USA, for 1 Days and 1 Night for Family with a Luxury budget with a Flight details, Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 1 days and 1 night with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "travel_plan": {\n    "destination": "New York City, USA",\n    "duration": "1 day and 1 night",\n    "budget": "Luxury",\n    "flight_details": {\n      "airline": "Delta Air Lines",\n      "flight_number": "DL1234",\n      "departure_airport": "SFO (San Francisco International Airport)",\n      "arrival_airport": "JFK (John F. Kennedy International Airport)",\n      "departure_date": "2023-12-15",\n      "arrival_date": "2023-12-15",\n      "departure_time": "10:00 AM",\n      "arrival_time": "1:00 PM",\n      "price": "$500",\n      "booking_url": "https://www.delta.com/"\n    },\n    "hotel_options": [\n      {\n        "hotel_name": "The Peninsula New York",\n        "hotel_address": "700 Fifth Avenue, New York, NY 10019",\n        "price": "$1,500+",\n        "hotel_image_url": "https://www.thepeninsula.com/newyork/en/images/gallery/slideshow/the-peninsula-new-york-hotel-exterior.jpg",\n        "geo_coordinates": {\n          "latitude": 40.7580,\n          "longitude": -73.9855\n        },\n        "rating": 4.8,\n        "description": "A luxurious and iconic hotel in Midtown Manhattan, known for its elegant rooms, exceptional dining, and prime location."\n      },\n      {\n        "hotel_name": "The Ritz-Carlton New York, Central Park",\n        "hotel_address": "50 Central Park South, New York, NY 10019",\n        "price": "$1,200+",\n        "hotel_image_url": "https://www.ritzcarlton.com/en/hotels/new-york/central-park/images/hotel-exterior.jpg",\n        "geo_coordinates": {\n          "latitude": 40.7649,\n          "longitude": -73.9774\n        },\n        "rating": 4.7,\n        "description": "A sophisticated hotel with stunning views of Central Park, offering luxurious accommodations, fine dining, and a rooftop bar."\n      },\n      {\n        "hotel_name": "The Four Seasons Hotel New York Downtown",\n        "hotel_address": "27 Barclay Street, New York, NY 10007",\n        "price": "$1,000+",\n        "hotel_image_url": "https://www.fourseasons.com/newyorkdowntown/images/hotel-exterior.jpg",\n        "geo_coordinates": {\n          "latitude": 40.7128,\n          "longitude": -74.0060\n        },\n        "rating": 4.6,\n        "description": "A modern and stylish hotel in Tribeca, offering elegant rooms, a rooftop pool, and excellent dining options."\n      }\n    ],\n    "day_plans": [\n      {\n        "day": "Day 1",\n        "schedule": [\n          {\n            "time": "1:00 PM - 2:00 PM",\n            "activity": "Check in to your hotel and settle in.",\n            "location": {\n              "place_name": "Hotel",\n              "place_details": "Your chosen hotel (e.g., The Peninsula New York)",\n              "place_image_url": "Refer to hotel image URLs in hotel options",\n              "geo_coordinates": {\n                "latitude": "See hotel options",\n                "longitude": "See hotel options"\n              },\n              "ticket_pricing": "N/A",\n              "time_to_travel": "N/A"\n            }\n          },\n          {\n            "time": "2:00 PM - 4:00 PM",\n            "activity": "Lunch at The NoMad Restaurant",\n            "location": {\n              "place_name": "The NoMad Restaurant",\n              "place_details": "A Michelin-starred restaurant known for its elegant ambiance and exquisite cuisine.",\n              "place_image_url": "https://www.nomadrhc.com/wp-content/uploads/2018/09/NoMad-Restaurant-Dining-Room-New-York-City.jpg",\n              "geo_coordinates": {\n                "latitude": 40.7392,\n                "longitude": -73.9906\n              },\n              "ticket_pricing": "N/A",\n              "time_to_travel": "15 minutes"\n            }\n          },\n          {\n            "time": "4:00 PM - 6:00 PM",\n            "activity": "Explore Central Park",\n            "location": {\n              "place_name": "Central Park",\n              "place_details": "A sprawling urban oasis offering scenic walks, bike paths, and a variety of attractions.",\n              "place_image_url": "https://www.nycgo.com/images/uploads/media/nycgo-central-park-500x375-121983.jpg",\n              "geo_coordinates": {\n                "latitude": 40.7829,\n                "longitude": -73.9654\n              },\n              "ticket_pricing": "N/A",\n              "time_to_travel": "10 minutes (from The NoMad Restaurant)"\n            }\n          },\n          {\n            "time": "6:00 PM - 7:00 PM",\n            "activity": "Dinner at The Polo Bar",\n            "location": {\n              "place_name": "The Polo Bar",\n              "place_details": "A classic and elegant restaurant known for its refined atmosphere and American comfort food.",\n              "place_image_url": "https://www.thepolobar.com/wp-content/uploads/2019/07/Polo-Bar-Exterior.jpg",\n              "geo_coordinates": {\n                "latitude": 40.7577,\n                "longitude": -73.9779\n              },\n              "ticket_pricing": "N/A",\n              "time_to_travel": "20 minutes (from Central Park)"\n            }\n          },\n          {\n            "time": "7:00 PM - 9:00 PM",\n            "activity": "Enjoy a Broadway show",\n            "location": {\n              "place_name": "Broadway",\n              "place_details": "A world-renowned theater district offering a variety of Broadway shows.",\n              "place_image_url": "https://www.nycgo.com/images/uploads/media/nycgo-broadway-theater-district-500x375-31457.jpg",\n              "geo_coordinates": {\n                "latitude": 40.7580,\n                "longitude": -73.9855\n              },\n              "ticket_pricing": "$100+",\n              "time_to_travel": "10 minutes (from The Polo Bar)"\n            }\n          }\n        ]\n      },\n      {\n        "day": "Day 2",\n        "schedule": [\n          {\n            "time": "8:00 AM - 9:00 AM",\n            "activity": "Breakfast at The Carlyle Hotel",\n            "location": {\n              "place_name": "The Carlyle Hotel",\n              "place_details": "A luxurious hotel known for its sophisticated atmosphere and elegant breakfast.",\n              "place_image_url": "https://www.thecarlyle.com/images/gallery/slideshow/carlyle-exterior.jpg",\n              "geo_coordinates": {\n                "latitude": 40.7711,\n                "longitude": -73.9625\n              },\n              "ticket_pricing": "N/A",\n              "time_to_travel": "15 minutes (from Broadway)"\n            }\n          },\n          {\n            "time": "9:00 AM - 12:00 PM",\n            "activity": "Visit the Metropolitan Museum of Art",\n            "location": {\n              "place_name": "Metropolitan Museum of Art",\n              "place_details": "One of the world\'s largest and most comprehensive art museums.",\n              "place_image_url": "https://www.metmuseum.org/sites/default/files/styles/hero_image/public/images/slideshow/exterior_2_2x.jpg",\n              "geo_coordinates": {\n                "latitude": 40.7794,\n                "longitude": -73.9632\n              },\n              "ticket_pricing": "Suggested donation $25",\n              "time_to_travel": "10 minutes (from The Carlyle Hotel)"\n            }\n          },\n          {\n            "time": "12:00 PM - 1:00 PM",\n            "activity": "Lunch at The Clocktower Restaurant",\n            "location": {\n              "place_name": "The Clocktower Restaurant",\n              "place_details": "A modern and stylish restaurant known for its creative cuisine and elegant ambiance.",\n              "place_image_url": "https://www.theclocktowernyc.com/wp-content/uploads/2018/08/Clocktower-Exterior-1-1024x683.jpg",\n              "geo_coordinates": {\n                "latitude": 40.7404,\n                "longitude": -73.9877\n              },\n              "ticket_pricing": "N/A",\n              "time_to_travel": "20 minutes (from The Metropolitan Museum of Art)"\n            }\n          },\n          {\n            "time": "1:00 PM - 3:00 PM",\n            "activity": "Shop on Fifth Avenue",\n            "location": {\n              "place_name": "Fifth Avenue",\n              "place_details": "A world-famous shopping street known for its luxury boutiques and department stores.",\n              "place_image_url": "https://www.nycgo.com/images/uploads/media/nycgo-fifth-avenue-500x375-31454.jpg",\n              "geo_coordinates": {\n                "latitude": 40.7577,\n                "longitude": -73.9779\n              },\n              "ticket_pricing": "N/A",\n              "time_to_travel": "5 minutes (from The Clocktower Restaurant)"\n            }\n          },\n          {\n            "time": "3:00 PM - 4:00 PM",\n            "activity": "Enjoy Afternoon Tea at The Palm Court at The Plaza Hotel",\n            "location": {\n              "place_name": "The Palm Court at The Plaza Hotel",\n              "place_details": "A classic and elegant tea room known for its sophisticated atmosphere and afternoon tea service.",\n              "place_image_url": "https://www.theplazanewyork.com/content/dam/theplazanewyork/images/homepage/palm-court-afternoon-tea.jpg",\n              "geo_coordinates": {\n                "latitude": 40.7661,\n                "longitude": -73.9762\n              },\n              "ticket_pricing": "$65+",\n              "time_to_travel": "10 minutes (from Fifth Avenue)"\n            }\n          },\n          {\n            "time": "4:00 PM - 5:00 PM",\n            "activity": "Check out of your hotel.",\n            "location": {\n              "place_name": "Hotel",\n              "place_details": "Your chosen hotel (e.g., The Peninsula New York)",\n              "place_image_url": "Refer to hotel image URLs in hotel options",\n              "geo_coordinates": {\n                "latitude": "See hotel options",\n                "longitude": "See hotel options"\n              },\n              "ticket_pricing": "N/A",\n              "time_to_travel": "N/A"\n            }\n          },\n          {\n            "time": "5:00 PM - 6:00 PM",\n            "activity": "Head to JFK Airport for your flight.",\n            "location": {\n              "place_name": "JFK Airport",\n              "place_details": "John F. Kennedy International Airport",\n              "place_image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/JFK_Airport_Aerial.jpg/1200px-JFK_Airport_Aerial.jpg",\n              "geo_coordinates": {\n                "latitude": 40.6413,\n                "longitude": -73.7781\n              },\n              "ticket_pricing": "N/A",\n              "time_to_travel": "1 hour (depending on traffic)"\n            }\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n**Please note:**\n\n* This plan is just a suggestion and can be customized to your preferences and interests.\n* Hotel prices and flight prices are approximate and may vary depending on availability and booking time. \n* Time estimates for travel between locations are based on average travel times and may vary depending on traffic.\n* Ticket prices for attractions are subject to change.\n* It is recommended to book flights and hotels in advance, especially for luxury options, to ensure availability and secure the best rates. \n',
        },
      ],
    },
  ],
})
